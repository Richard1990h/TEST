/* ============================================================================
   DARK MODE - Premium ChatGPT-inspired theme
   Complements design-system.css
   ============================================================================ */

/* Light Mode Already Defined in design-system.css - Additional overrides */

/* ============================================================================
   DARK MODE SPECIFIC OVERRIDES
   ============================================================================ */

[data-theme="dark"] body {
    background-color: var(--bg-canvas);
    color: var(--text-primary);
}

/* ─────────────────────────────────────────────────────────────────────────────
   SCROLLBARS
   ───────────────────────────────────────────────────────────────────────────── */

[data-theme="dark"] ::-webkit-scrollbar-thumb {
    background: var(--border-strong);
}

[data-theme="dark"] ::-webkit-scrollbar-thumb:hover {
    background: var(--text-muted);
}

/* ─────────────────────────────────────────────────────────────────────────────
   FORMS
   ───────────────────────────────────────────────────────────────────────────── */

[data-theme="dark"] input,
[data-theme="dark"] textarea,
[data-theme="dark"] select {
    background-color: var(--input-bg);
    border-color: var(--input-border);
    color: var(--text-primary);
}

[data-theme="dark"] input::placeholder,
[data-theme="dark"] textarea::placeholder {
    color: var(--text-placeholder);
}

[data-theme="dark"] input:focus,
[data-theme="dark"] textarea:focus,
[data-theme="dark"] select:focus {
    border-color: var(--input-border-focus);
    box-shadow: var(--shadow-focus);
}

/* ─────────────────────────────────────────────────────────────────────────────
   CARDS & CONTAINERS
   ───────────────────────────────────────────────────────────────────────────── */

[data-theme="dark"] .card,
[data-theme="dark"] .admin-card {
    background-color: var(--card-bg);
    border-color: var(--card-border);
}

/* ─────────────────────────────────────────────────────────────────────────────
   TABLES
   ───────────────────────────────────────────────────────────────────────────── */

[data-theme="dark"] th {
    background-color: var(--table-header-bg);
    color: var(--text-secondary);
    border-color: var(--table-border);
}

[data-theme="dark"] td {
    border-color: var(--table-border);
    color: var(--text-primary);
}

[data-theme="dark"] tbody tr:hover {
    background-color: var(--table-row-hover);
}

[data-theme="dark"] .admin-table th {
    background-color: var(--table-header-bg);
}

[data-theme="dark"] .admin-table tr:hover td {
    background-color: var(--table-row-hover);
}

/* ─────────────────────────────────────────────────────────────────────────────
   BUTTONS
   ───────────────────────────────────────────────────────────────────────────── */

[data-theme="dark"] .btn-primary {
    background-color: var(--btn-primary-bg);
    color: var(--btn-primary-text);
    border-color: var(--btn-primary-bg);
}

[data-theme="dark"] .btn-primary:hover:not(:disabled) {
    background-color: var(--btn-primary-hover);
}

[data-theme="dark"] .btn-secondary {
    background-color: var(--btn-secondary-bg);
    border-color: var(--btn-secondary-border);
}

[data-theme="dark"] .btn-secondary:hover:not(:disabled) {
    background-color: var(--btn-secondary-hover);
}

[data-theme="dark"] .admin-btn {
    background-color: var(--btn-secondary-bg);
    border-color: var(--btn-secondary-border);
    color: var(--text-primary);
}

[data-theme="dark"] .admin-btn:hover:not(:disabled) {
    background-color: var(--btn-secondary-hover);
}

[data-theme="dark"] .admin-btn-primary {
    background-color: rgba(96, 165, 250, 0.15);
    border-color: rgba(96, 165, 250, 0.4);
    color: var(--primary-400);
}

[data-theme="dark"] .admin-btn-primary:hover:not(:disabled) {
    background-color: var(--primary-500);
    color: white;
}

[data-theme="dark"] .admin-btn-danger {
    background-color: rgba(239, 68, 68, 0.15);
    border-color: rgba(239, 68, 68, 0.4);
    color: var(--error-500);
}

[data-theme="dark"] .admin-btn-danger:hover:not(:disabled) {
    background-color: var(--error-500);
    color: white;
}

/* ─────────────────────────────────────────────────────────────────────────────
   SIDEBAR & NAVIGATION
   ───────────────────────────────────────────────────────────────────────────── */

[data-theme="dark"] .sidebar,
[data-theme="dark"] .admin-sidebar {
    background-color: var(--sidebar-bg);
    border-color: var(--sidebar-border);
}

[data-theme="dark"] .admin-nav button {
    color: var(--text-secondary);
}

[data-theme="dark"] .admin-nav button:hover {
    background-color: var(--sidebar-item-hover);
    color: var(--text-primary);
}

[data-theme="dark"] .admin-nav button.active {
    background-color: var(--sidebar-item-active);
    color: var(--text-primary);
}

[data-theme="dark"] .admin-nav-back {
    background-color: var(--bg-tertiary);
    border-color: var(--border-default);
}

[data-theme="dark"] .admin-nav-back:hover {
    background-color: var(--bg-hover);
}

[data-theme="dark"] .admin-brand {
    background-color: var(--bg-tertiary);
    border-color: var(--border-default);
}

/* ─────────────────────────────────────────────────────────────────────────────
   STATS & PILLS
   ───────────────────────────────────────────────────────────────────────────── */

[data-theme="dark"] .stat {
    background-color: var(--card-bg);
    border-color: var(--border-default);
}

[data-theme="dark"] .stat:hover {
    border-color: var(--primary-400);
}

[data-theme="dark"] .pill {
    background-color: var(--bg-tertiary);
    border-color: var(--border-default);
}

[data-theme="dark"] .quick-row {
    background-color: var(--card-bg);
    border-color: var(--border-default);
}

/* ─────────────────────────────────────────────────────────────────────────────
   MODALS
   ───────────────────────────────────────────────────────────────────────────── */

[data-theme="dark"] .modal,
[data-theme="dark"] .admin-modal {
    background-color: var(--card-bg);
    border-color: var(--border-default);
}

[data-theme="dark"] .modal-header,
[data-theme="dark"] .modal-footer {
    border-color: var(--border-default);
}

[data-theme="dark"] .admin-json {
    background-color: var(--bg-elevated);
    border-color: var(--border-default);
    color: var(--text-primary);
}

/* ─────────────────────────────────────────────────────────────────────────────
   DROPDOWNS & POPOVERS
   ───────────────────────────────────────────────────────────────────────────── */

[data-theme="dark"] .dropdown-menu,
[data-theme="dark"] .popover {
    background-color: var(--card-bg);
    border-color: var(--border-default);
}

[data-theme="dark"] .dropdown-item:hover {
    background-color: var(--bg-hover);
}

[data-theme="dark"] .dropdown-divider {
    background-color: var(--border-default);
}

/* ─────────────────────────────────────────────────────────────────────────────
   ALERTS & ERRORS
   ───────────────────────────────────────────────────────────────────────────── */

[data-theme="dark"] .admin-error {
    background-color: rgba(239, 68, 68, 0.1);
    border-color: rgba(239, 68, 68, 0.3);
    color: var(--error-500);
}

[data-theme="dark"] .error-msg {
    background-color: rgba(239, 68, 68, 0.1);
    border-color: rgba(239, 68, 68, 0.3);
    color: var(--error-500);
}

[data-theme="dark"] .success-msg {
    background-color: rgba(16, 185, 129, 0.1);
    color: var(--success-500);
}

/* ─────────────────────────────────────────────────────────────────────────────
   AUTH PAGES
   ───────────────────────────────────────────────────────────────────────────── */

[data-theme="dark"] .auth-wrapper {
    background: linear-gradient(135deg, #0f0f0f 0%, #171717 50%, #1a1a1a 100%);
}

[data-theme="dark"] .login-container,
[data-theme="dark"] .register-container {
    background-color: var(--card-bg);
    border-color: var(--border-default);
}

[data-theme="dark"] .login-header h2,
[data-theme="dark"] .register-header h2 {
    color: var(--text-primary);
}

[data-theme="dark"] .login-header p,
[data-theme="dark"] .register-header p {
    color: var(--text-secondary);
}

[data-theme="dark"] .input-control {
    background-color: var(--input-bg);
    border-color: var(--input-border);
    color: var(--text-primary);
}

[data-theme="dark"] .input-control:focus {
    border-color: var(--input-border-focus);
    box-shadow: var(--shadow-focus);
    background-color: var(--input-bg);
}

[data-theme="dark"] .login-btn,
[data-theme="dark"] .register-btn {
    background: var(--btn-primary-bg);
    color: var(--btn-primary-text);
}

[data-theme="dark"] .login-btn:hover:not(:disabled),
[data-theme="dark"] .register-btn:hover:not(:disabled) {
    background: var(--btn-primary-hover);
}

[data-theme="dark"] .footer-section,
[data-theme="dark"] .footer-links {
    border-color: var(--border-default);
    color: var(--text-secondary);
}

[data-theme="dark"] .footer-links a {
    color: var(--text-link);
}

/* ─────────────────────────────────────────────────────────────────────────────
   CHAT & MAIN LAYOUT
   ───────────────────────────────────────────────────────────────────────────── */

[data-theme="dark"] .app-layout {
    background-color: var(--bg-canvas);
}

[data-theme="dark"] .chat-wrapper {
    background-color: var(--bg-primary);
}

[data-theme="dark"] .message-bubble {
    background-color: var(--bg-tertiary);
}

[data-theme="dark"] .message-bubble.user {
    background-color: var(--bg-selected);
}

[data-theme="dark"] .input-area {
    background-color: var(--bg-primary);
    border-color: var(--border-default);
}

[data-theme="dark"] .chat-input {
    background-color: var(--input-bg);
    border-color: var(--input-border);
    color: var(--text-primary);
}

[data-theme="dark"] .chat-input:focus {
    border-color: var(--input-border-focus);
}

/* ─────────────────────────────────────────────────────────────────────────────
   NOTIFICATIONS & PROFILE
   ───────────────────────────────────────────────────────────────────────────── */

[data-theme="dark"] .notifications-panel,
[data-theme="dark"] .profile-popover {
    background-color: var(--card-bg);
    border-color: var(--border-default);
}

[data-theme="dark"] .notification-item:hover {
    background-color: var(--bg-hover);
}

[data-theme="dark"] .profile-popover button:hover {
    background-color: var(--bg-hover);
}

/* ─────────────────────────────────────────────────────────────────────────────
   PLAN STATUS BAR
   ───────────────────────────────────────────────────────────────────────────── */

[data-theme="dark"] .plan-status-bar {
    background-color: var(--bg-tertiary);
    border-color: var(--border-default);
}

[data-theme="dark"] .plan-pill {
    background-color: var(--bg-elevated);
    border-color: var(--border-default);
    color: var(--text-primary);
}

/* ─────────────────────────────────────────────────────────────────────────────
   ICON BUTTONS
   ───────────────────────────────────────────────────────────────────────────── */

[data-theme="dark"] .icon-btn {
    color: var(--text-secondary);
}

[data-theme="dark"] .icon-btn:hover {
    color: var(--text-primary);
}

[data-theme="dark"] .icon-btn:hover::before {
    background: radial-gradient(circle, rgba(255, 255, 255, 0.1) 0%, transparent 70%);
}

[data-theme="dark"] .voice-btn.recording {
    color: var(--error-500);
}

/* ─────────────────────────────────────────────────────────────────────────────
   MODEL SELECTOR
   ───────────────────────────────────────────────────────────────────────────── */

[data-theme="dark"] .model-selector {
    background-color: var(--bg-tertiary);
    border-color: var(--border-default);
}

[data-theme="dark"] .model-selector:hover {
    border-color: var(--border-strong);
}

/* ─────────────────────────────────────────────────────────────────────────────
   SETTINGS PAGE
   ───────────────────────────────────────────────────────────────────────────── */

[data-theme="dark"] .settings-card {
    background-color: var(--card-bg);
    border-color: var(--border-default);
}

[data-theme="dark"] .danger-zone {
    border-color: var(--border-default);
}

[data-theme="dark"] .delete-btn {
    background-color: rgba(239, 68, 68, 0.1);
    border-color: rgba(239, 68, 68, 0.3);
    color: var(--error-500);
}

[data-theme="dark"] .delete-btn:hover {
    background-color: rgba(239, 68, 68, 0.2);
}

/* ─────────────────────────────────────────────────────────────────────────────
   PLANS PAGE
   ───────────────────────────────────────────────────────────────────────────── */

[data-theme="dark"] .plan-card {
    background-color: var(--card-bg);
    border-color: var(--border-default);
}

[data-theme="dark"] .plan-card:hover {
    border-color: var(--primary-400);
    background-color: var(--bg-elevated);
}

/* ─────────────────────────────────────────────────────────────────────────────
   CODE BLOCKS
   ───────────────────────────────────────────────────────────────────────────── */

[data-theme="dark"] pre,
[data-theme="dark"] code {
    background-color: var(--bg-tertiary);
    color: var(--text-primary);
}

/* ─────────────────────────────────────────────────────────────────────────────
   TRANSITIONS
   ───────────────────────────────────────────────────────────────────────────── */

body,
.card,
.admin-card,
.modal,
.dropdown-menu,
input,
textarea,
select,
button,
.sidebar,
.admin-sidebar,
th,
td {
    transition: 
        background-color 0.15s ease,
        border-color 0.15s ease,
        color 0.15s ease,
        box-shadow 0.15s ease;
}

/* Prevent transitions on initial load */
html.no-transition * {
    transition: none !important;
}

/* ─────────────────────────────────────────────────────────────────────────────
   PREVENT FOUC
   ───────────────────────────────────────────────────────────────────────────── */

html:not([data-theme]) {
    visibility: visible;
}

html[data-theme] {
    visibility: visible;
}
